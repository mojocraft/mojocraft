ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cckzfxvb.s 			page 1


   1              		.cpu cortex-m3
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 1
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"MultiButton.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.text.button_init,"ax",%progbits
  16              		.align	1
  17              		.global	button_init
  18              		.arch armv7-m
  19              		.syntax unified
  20              		.thumb
  21              		.thumb_func
  22              		.fpu softvfp
  24              	button_init:
  25              	.LVL0:
  26              	.LFB3:
  27              		.file 1 "Core/Src/MultiButton.c"
   1:Core/Src/MultiButton.c **** #include "MultiButton.h"
   2:Core/Src/MultiButton.c **** #include "stdio.h"
   3:Core/Src/MultiButton.c **** #define EVENT_CB(ev)    \
   4:Core/Src/MultiButton.c **** 	if (handle->cb[ev]) \
   5:Core/Src/MultiButton.c **** 	handle->cb[ev]((Button *)handle)
   6:Core/Src/MultiButton.c **** 
   7:Core/Src/MultiButton.c **** static struct Button *head_handle = NULL;
   8:Core/Src/MultiButton.c **** /**
   9:Core/Src/MultiButton.c ****  * @brief  Initializes the button struct handle.
  10:Core/Src/MultiButton.c ****  * @param  handle: the button handle strcut.
  11:Core/Src/MultiButton.c ****  * @param  pin_level: read the HAL GPIO of the connet button level.
  12:Core/Src/MultiButton.c ****  * @param  active_level: pressed GPIO level.
  13:Core/Src/MultiButton.c ****  * @retval None
  14:Core/Src/MultiButton.c ****  */
  15:Core/Src/MultiButton.c **** void button_init(struct Button *handle, uint8_t (*pin_level)(), uint8_t act_level)
  16:Core/Src/MultiButton.c **** {
  28              		.loc 1 16 1 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		.loc 1 16 1 is_stmt 0 view .LVU1
  33 0000 70B5     		push	{r4, r5, r6, lr}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 16
  36              		.cfi_offset 4, -16
  37              		.cfi_offset 5, -12
  38              		.cfi_offset 6, -8
  39              		.cfi_offset 14, -4
  40 0002 0446     		mov	r4, r0
  41 0004 0D46     		mov	r5, r1
  42 0006 1646     		mov	r6, r2
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cckzfxvb.s 			page 2


  17:Core/Src/MultiButton.c **** 	memset(handle, 0, sizeof(struct Button)); //ä»¥è¿™ä¸ªhandleä¸ºèµ·ç‚¹ï¼Œå°†Buttonç»“æž„ä½“å¤§å°çš„
  43              		.loc 1 17 2 is_stmt 1 view .LVU2
  44 0008 2822     		movs	r2, #40
  45              	.LVL1:
  46              		.loc 1 17 2 is_stmt 0 view .LVU3
  47 000a 0021     		movs	r1, #0
  48              	.LVL2:
  49              		.loc 1 17 2 view .LVU4
  50 000c FFF7FEFF 		bl	memset
  51              	.LVL3:
  18:Core/Src/MultiButton.c **** 	handle->event = (uint8_t)NONE_PRESS;
  52              		.loc 1 18 2 is_stmt 1 view .LVU5
  53              		.loc 1 18 16 is_stmt 0 view .LVU6
  54 0010 4FF00003 		mov	r3, #0
  55 0014 0822     		movs	r2, #8
  56 0016 62F30713 		bfi	r3, r2, #4, #4
  57 001a A370     		strb	r3, [r4, #2]
  19:Core/Src/MultiButton.c **** 	handle->hal_button_level = pin_level;			   //æ­¤å¤„ä¼ å…¥çš„æ˜¯ä¸€ä¸ªå‡½æ•°åœ°å€ï¼Œç»™ç»“æž„ä½“ä¸
  58              		.loc 1 19 2 is_stmt 1 view .LVU7
  59              		.loc 1 19 27 is_stmt 0 view .LVU8
  60 001c 6560     		str	r5, [r4, #4]
  20:Core/Src/MultiButton.c **** 	handle->button_level = handle->hal_button_level(); //æ­¤å¤„è°ƒç”¨ç»“æž„ä½“ä¸­çš„å‡½æ•° ä¹Ÿå°±æ˜¯ä¼
  61              		.loc 1 20 2 is_stmt 1 view .LVU9
  62              		.loc 1 20 25 is_stmt 0 view .LVU10
  63 001e A847     		blx	r5
  64              	.LVL4:
  65              		.loc 1 20 23 view .LVU11
  66 0020 E378     		ldrb	r3, [r4, #3]	@ zero_extendqisi2
  67 0022 60F3C713 		bfi	r3, r0, #7, #1
  21:Core/Src/MultiButton.c **** 	handle->active_level = act_level;
  68              		.loc 1 21 2 is_stmt 1 view .LVU12
  69              		.loc 1 21 23 is_stmt 0 view .LVU13
  70 0026 66F38613 		bfi	r3, r6, #6, #1
  71              	.LVL5:
  72              		.loc 1 21 23 view .LVU14
  73 002a E370     		strb	r3, [r4, #3]
  22:Core/Src/MultiButton.c **** }
  74              		.loc 1 22 1 view .LVU15
  75 002c 70BD     		pop	{r4, r5, r6, pc}
  76              		.loc 1 22 1 view .LVU16
  77              		.cfi_endproc
  78              	.LFE3:
  80              		.section	.text.button_attach,"ax",%progbits
  81              		.align	1
  82              		.global	button_attach
  83              		.syntax unified
  84              		.thumb
  85              		.thumb_func
  86              		.fpu softvfp
  88              	button_attach:
  89              	.LVL6:
  90              	.LFB4:
  23:Core/Src/MultiButton.c **** /**
  24:Core/Src/MultiButton.c ****  * @brief  Attach the button event callback function.
  25:Core/Src/MultiButton.c ****  * @param  handle: the button handle strcut.
  26:Core/Src/MultiButton.c ****  * @param  event: trigger event type.
  27:Core/Src/MultiButton.c ****  * @param  cb: callback function.
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cckzfxvb.s 			page 3


  28:Core/Src/MultiButton.c ****  * @retval None
  29:Core/Src/MultiButton.c ****  */
  30:Core/Src/MultiButton.c **** void button_attach(struct Button *handle, PressEvent event, BtnCallback cb)
  31:Core/Src/MultiButton.c **** {
  91              		.loc 1 31 1 is_stmt 1 view -0
  92              		.cfi_startproc
  93              		@ args = 0, pretend = 0, frame = 0
  94              		@ frame_needed = 0, uses_anonymous_args = 0
  95              		@ link register save eliminated.
  32:Core/Src/MultiButton.c **** 	//å°†æŒ‰é”®ç»“æž„ä½“ä¸­çš„å›žè°ƒå‡½æ•°ä¸Žä¼ å…¥çš„äº‹ä»¶ä¸Žå›žè°ƒå‡½æ•°å…³è”ã€‚
  33:Core/Src/MultiButton.c **** 	handle->cb[event] = cb;
  96              		.loc 1 33 2 view .LVU18
  97              		.loc 1 33 20 is_stmt 0 view .LVU19
  98 0000 0231     		adds	r1, r1, #2
  99              	.LVL7:
 100              		.loc 1 33 20 view .LVU20
 101 0002 40F82120 		str	r2, [r0, r1, lsl #2]
  34:Core/Src/MultiButton.c **** }
 102              		.loc 1 34 1 view .LVU21
 103 0006 7047     		bx	lr
 104              		.cfi_endproc
 105              	.LFE4:
 107              		.section	.text.get_button_event,"ax",%progbits
 108              		.align	1
 109              		.global	get_button_event
 110              		.syntax unified
 111              		.thumb
 112              		.thumb_func
 113              		.fpu softvfp
 115              	get_button_event:
 116              	.LVL8:
 117              	.LFB5:
  35:Core/Src/MultiButton.c **** /**
  36:Core/Src/MultiButton.c ****  * @brief  Inquire the button event happen.
  37:Core/Src/MultiButton.c ****  * @param  handle: the button handle strcut.
  38:Core/Src/MultiButton.c ****  * @retval button event.
  39:Core/Src/MultiButton.c ****  */
  40:Core/Src/MultiButton.c **** PressEvent get_button_event(struct Button *handle)
  41:Core/Src/MultiButton.c **** {
 118              		.loc 1 41 1 is_stmt 1 view -0
 119              		.cfi_startproc
 120              		@ args = 0, pretend = 0, frame = 0
 121              		@ frame_needed = 0, uses_anonymous_args = 0
 122              		@ link register save eliminated.
  42:Core/Src/MultiButton.c **** 	return (PressEvent)handle->event;
 123              		.loc 1 42 2 view .LVU23
 124              		.loc 1 42 27 is_stmt 0 view .LVU24
 125 0000 8078     		ldrb	r0, [r0, #2]	@ zero_extendqisi2
 126              	.LVL9:
  43:Core/Src/MultiButton.c **** }
 127              		.loc 1 43 1 view .LVU25
 128 0002 0009     		lsrs	r0, r0, #4
 129 0004 7047     		bx	lr
 130              		.cfi_endproc
 131              	.LFE5:
 133              		.section	.text.button_handler,"ax",%progbits
 134              		.align	1
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cckzfxvb.s 			page 4


 135              		.global	button_handler
 136              		.syntax unified
 137              		.thumb
 138              		.thumb_func
 139              		.fpu softvfp
 141              	button_handler:
 142              	.LVL10:
 143              	.LFB6:
  44:Core/Src/MultiButton.c **** /**
  45:Core/Src/MultiButton.c ****  * @brief  Button driver core function, driver state machine.
  46:Core/Src/MultiButton.c ****  * @param  handle: the button handle strcut.
  47:Core/Src/MultiButton.c ****  * @retval None
  48:Core/Src/MultiButton.c ****  */
  49:Core/Src/MultiButton.c **** void button_handler(struct Button *handle)
  50:Core/Src/MultiButton.c **** {
 144              		.loc 1 50 1 is_stmt 1 view -0
 145              		.cfi_startproc
 146              		@ args = 0, pretend = 0, frame = 0
 147              		@ frame_needed = 0, uses_anonymous_args = 0
 148              		.loc 1 50 1 is_stmt 0 view .LVU27
 149 0000 10B5     		push	{r4, lr}
 150              	.LCFI1:
 151              		.cfi_def_cfa_offset 8
 152              		.cfi_offset 4, -8
 153              		.cfi_offset 14, -4
 154 0002 0446     		mov	r4, r0
  51:Core/Src/MultiButton.c **** 	uint8_t read_gpio_level = handle->hal_button_level(); //èŽ·å–gpioç”µå¹³
 155              		.loc 1 51 2 is_stmt 1 view .LVU28
 156              		.loc 1 51 34 is_stmt 0 view .LVU29
 157 0004 4368     		ldr	r3, [r0, #4]
 158              		.loc 1 51 28 view .LVU30
 159 0006 9847     		blx	r3
 160              	.LVL11:
  52:Core/Src/MultiButton.c **** 
  53:Core/Src/MultiButton.c **** 	// ticks counter working...
  54:Core/Src/MultiButton.c **** 	if ((handle->state) > 0)
 161              		.loc 1 54 2 is_stmt 1 view .LVU31
 162              		.loc 1 54 22 is_stmt 0 view .LVU32
 163 0008 E378     		ldrb	r3, [r4, #3]	@ zero_extendqisi2
 164              		.loc 1 54 5 view .LVU33
 165 000a 13F0070F 		tst	r3, #7
 166 000e 02D0     		beq	.L6
  55:Core/Src/MultiButton.c **** 		handle->ticks++;
 167              		.loc 1 55 3 is_stmt 1 view .LVU34
 168              		.loc 1 55 9 is_stmt 0 view .LVU35
 169 0010 2388     		ldrh	r3, [r4]
 170              		.loc 1 55 16 view .LVU36
 171 0012 0133     		adds	r3, r3, #1
 172 0014 2380     		strh	r3, [r4]	@ movhi
 173              	.L6:
  56:Core/Src/MultiButton.c **** 
  57:Core/Src/MultiButton.c **** 	/*button debounce handle*/
  58:Core/Src/MultiButton.c **** 	if (read_gpio_level != handle->button_level)
 174              		.loc 1 58 2 is_stmt 1 view .LVU37
 175              		.loc 1 58 31 is_stmt 0 view .LVU38
 176 0016 E378     		ldrb	r3, [r4, #3]	@ zero_extendqisi2
 177              		.loc 1 58 5 view .LVU39
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cckzfxvb.s 			page 5


 178 0018 B0EBD31F 		cmp	r0, r3, lsr #7
 179 001c 11D0     		beq	.L7
  59:Core/Src/MultiButton.c **** 	{ // not equal to prev one
  60:Core/Src/MultiButton.c **** 		// continue read 3 times same new level change
  61:Core/Src/MultiButton.c **** 		if (++(handle->debounce_cnt) >= DEBOUNCE_TICKS)
 180              		.loc 1 61 3 is_stmt 1 view .LVU40
 181              		.loc 1 61 16 is_stmt 0 view .LVU41
 182 001e 1A46     		mov	r2, r3
 183 0020 C3F3C203 		ubfx	r3, r3, #3, #3
 184              		.loc 1 61 7 view .LVU42
 185 0024 0133     		adds	r3, r3, #1
 186 0026 03F00703 		and	r3, r3, #7
 187              		.loc 1 61 6 view .LVU43
 188 002a 63F3C502 		bfi	r2, r3, #3, #3
 189 002e E270     		strb	r2, [r4, #3]
 190 0030 022B     		cmp	r3, #2
 191 0032 0AD9     		bls	.L8
  62:Core/Src/MultiButton.c **** 		{
  63:Core/Src/MultiButton.c **** 			handle->button_level = read_gpio_level;
 192              		.loc 1 63 4 is_stmt 1 view .LVU44
 193              		.loc 1 63 25 is_stmt 0 view .LVU45
 194 0034 D3B2     		uxtb	r3, r2
 195 0036 60F3C713 		bfi	r3, r0, #7, #1
 196              	.LVL12:
  64:Core/Src/MultiButton.c **** 			handle->debounce_cnt = 0;
 197              		.loc 1 64 4 is_stmt 1 view .LVU46
 198              		.loc 1 64 25 is_stmt 0 view .LVU47
 199 003a 6FF3C503 		bfc	r3, #3, #3
 200 003e E370     		strb	r3, [r4, #3]
 201 0040 03E0     		b	.L8
 202              	.LVL13:
 203              	.L7:
  65:Core/Src/MultiButton.c **** 		}
  66:Core/Src/MultiButton.c **** 	}
  67:Core/Src/MultiButton.c **** 	else
  68:Core/Src/MultiButton.c **** 	{ // leved not change ,counter reset.
  69:Core/Src/MultiButton.c **** 		handle->debounce_cnt = 0;
 204              		.loc 1 69 3 is_stmt 1 view .LVU48
 205              		.loc 1 69 24 is_stmt 0 view .LVU49
 206 0042 E378     		ldrb	r3, [r4, #3]	@ zero_extendqisi2
 207 0044 6FF3C503 		bfc	r3, #3, #3
 208 0048 E370     		strb	r3, [r4, #3]
 209              	.LVL14:
 210              	.L8:
  70:Core/Src/MultiButton.c **** 	}
  71:Core/Src/MultiButton.c **** 
  72:Core/Src/MultiButton.c **** 	/*-----------------State machine-------------------*/
  73:Core/Src/MultiButton.c **** 	switch (handle->state)
 211              		.loc 1 73 2 is_stmt 1 view .LVU50
 212              		.loc 1 73 16 is_stmt 0 view .LVU51
 213 004a E378     		ldrb	r3, [r4, #3]	@ zero_extendqisi2
 214 004c 03F00703 		and	r3, r3, #7
 215 0050 052B     		cmp	r3, #5
 216 0052 0FD8     		bhi	.L5
 217 0054 DFE803F0 		tbb	[pc, r3]
 218              	.L11:
 219 0058 03       		.byte	(.L15-.L11)/2
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cckzfxvb.s 			page 6


 220 0059 23       		.byte	(.L14-.L11)/2
 221 005a 4C       		.byte	(.L13-.L11)/2
 222 005b 92       		.byte	(.L12-.L11)/2
 223 005c 0E       		.byte	(.L5-.L11)/2
 224 005d BA       		.byte	(.L10-.L11)/2
 225              		.p2align 1
 226              	.L15:
  74:Core/Src/MultiButton.c **** 	{
  75:Core/Src/MultiButton.c **** 	case 0:
  76:Core/Src/MultiButton.c **** 		if (handle->button_level == handle->active_level)
 227              		.loc 1 76 3 is_stmt 1 view .LVU52
 228              		.loc 1 76 13 is_stmt 0 view .LVU53
 229 005e E378     		ldrb	r3, [r4, #3]	@ zero_extendqisi2
 230              		.loc 1 76 37 view .LVU54
 231 0060 C3F38012 		ubfx	r2, r3, #6, #1
 232              		.loc 1 76 6 view .LVU55
 233 0064 B2EBD31F 		cmp	r2, r3, lsr #7
 234 0068 05D0     		beq	.L32
  77:Core/Src/MultiButton.c **** 		{ // start press down
  78:Core/Src/MultiButton.c **** 			handle->event = (uint8_t)PRESS_DOWN;
  79:Core/Src/MultiButton.c **** 			EVENT_CB(PRESS_DOWN); //#define EVENT_CB(ev)    if(handle->cb[ev])handle->cb[ev]((Button *)handl
  80:Core/Src/MultiButton.c **** 			handle->ticks = 0;
  81:Core/Src/MultiButton.c **** 			handle->repeat = 1;
  82:Core/Src/MultiButton.c **** 			handle->state = 1;
  83:Core/Src/MultiButton.c **** 		}
  84:Core/Src/MultiButton.c **** 		else
  85:Core/Src/MultiButton.c **** 		{
  86:Core/Src/MultiButton.c **** 			handle->event = (uint8_t)NONE_PRESS;
 235              		.loc 1 86 4 is_stmt 1 view .LVU56
 236              		.loc 1 86 18 is_stmt 0 view .LVU57
 237 006a A378     		ldrb	r3, [r4, #2]	@ zero_extendqisi2
 238 006c 0822     		movs	r2, #8
 239 006e 62F30713 		bfi	r3, r2, #4, #4
 240 0072 A370     		strb	r3, [r4, #2]
 241              	.L5:
  87:Core/Src/MultiButton.c **** 		}
  88:Core/Src/MultiButton.c **** 		break;
  89:Core/Src/MultiButton.c **** 
  90:Core/Src/MultiButton.c **** 	case 1:
  91:Core/Src/MultiButton.c **** 		if (handle->button_level != handle->active_level)
  92:Core/Src/MultiButton.c **** 		{ // released press up
  93:Core/Src/MultiButton.c **** 			handle->event = (uint8_t)PRESS_UP;
  94:Core/Src/MultiButton.c **** 			EVENT_CB(PRESS_UP);
  95:Core/Src/MultiButton.c **** 			handle->ticks = 0;
  96:Core/Src/MultiButton.c **** 			handle->state = 2;
  97:Core/Src/MultiButton.c **** 		}
  98:Core/Src/MultiButton.c **** 		else if (handle->ticks > LONG_TICKS)
  99:Core/Src/MultiButton.c **** 		{
 100:Core/Src/MultiButton.c **** 			handle->event = (uint8_t)LONG_PRESS_START;
 101:Core/Src/MultiButton.c **** 			EVENT_CB(LONG_PRESS_START);
 102:Core/Src/MultiButton.c **** 			handle->state = 5;
 103:Core/Src/MultiButton.c **** 		}
 104:Core/Src/MultiButton.c **** 		break;
 105:Core/Src/MultiButton.c **** 
 106:Core/Src/MultiButton.c **** 	case 2:
 107:Core/Src/MultiButton.c **** 		if (handle->button_level == handle->active_level)
 108:Core/Src/MultiButton.c **** 		{ // press down again
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cckzfxvb.s 			page 7


 109:Core/Src/MultiButton.c **** 			handle->event = (uint8_t)PRESS_DOWN;
 110:Core/Src/MultiButton.c **** 			EVENT_CB(PRESS_DOWN);
 111:Core/Src/MultiButton.c **** 			handle->repeat++;
 112:Core/Src/MultiButton.c **** 			EVENT_CB(PRESS_REPEAT); // repeat hit
 113:Core/Src/MultiButton.c **** 			handle->ticks = 0;
 114:Core/Src/MultiButton.c **** 			handle->state = 3;
 115:Core/Src/MultiButton.c **** 		}
 116:Core/Src/MultiButton.c **** 		else if (handle->ticks > SHORT_TICKS)
 117:Core/Src/MultiButton.c **** 		{ // released timeout
 118:Core/Src/MultiButton.c **** 			if (handle->repeat == 1)
 119:Core/Src/MultiButton.c **** 			{
 120:Core/Src/MultiButton.c **** 				handle->event = (uint8_t)SINGLE_CLICK;
 121:Core/Src/MultiButton.c **** 				EVENT_CB(SINGLE_CLICK);
 122:Core/Src/MultiButton.c **** 			}
 123:Core/Src/MultiButton.c **** 			else if (handle->repeat == 2)
 124:Core/Src/MultiButton.c **** 			{
 125:Core/Src/MultiButton.c **** 				handle->event = (uint8_t)DOUBLE_CLICK;
 126:Core/Src/MultiButton.c **** 				EVENT_CB(DOUBLE_CLICK); // repeat hit
 127:Core/Src/MultiButton.c **** 			}
 128:Core/Src/MultiButton.c **** 			handle->state = 0;
 129:Core/Src/MultiButton.c **** 		}
 130:Core/Src/MultiButton.c **** 		break;
 131:Core/Src/MultiButton.c **** 
 132:Core/Src/MultiButton.c **** 	case 3:
 133:Core/Src/MultiButton.c **** 		if (handle->button_level != handle->active_level)
 134:Core/Src/MultiButton.c **** 		{ // released press up
 135:Core/Src/MultiButton.c **** 			handle->event = (uint8_t)PRESS_UP;
 136:Core/Src/MultiButton.c **** 			EVENT_CB(PRESS_UP);
 137:Core/Src/MultiButton.c **** 			if (handle->ticks < SHORT_TICKS)
 138:Core/Src/MultiButton.c **** 			{
 139:Core/Src/MultiButton.c **** 				handle->ticks = 0;
 140:Core/Src/MultiButton.c **** 				handle->state = 2; // repeat press
 141:Core/Src/MultiButton.c **** 			}
 142:Core/Src/MultiButton.c **** 			else
 143:Core/Src/MultiButton.c **** 			{
 144:Core/Src/MultiButton.c **** 				handle->state = 0;
 145:Core/Src/MultiButton.c **** 			}
 146:Core/Src/MultiButton.c **** 		}
 147:Core/Src/MultiButton.c **** 		else if (handle->ticks > SHORT_TICKS)
 148:Core/Src/MultiButton.c **** 		{ // long press up
 149:Core/Src/MultiButton.c **** 			handle->state = 0;
 150:Core/Src/MultiButton.c **** 		}
 151:Core/Src/MultiButton.c **** 		break;
 152:Core/Src/MultiButton.c **** 
 153:Core/Src/MultiButton.c **** 	case 5:
 154:Core/Src/MultiButton.c **** 		if (handle->button_level == handle->active_level)
 155:Core/Src/MultiButton.c **** 		{
 156:Core/Src/MultiButton.c **** 			// continue hold trigger
 157:Core/Src/MultiButton.c **** 			handle->event = (uint8_t)LONG_PRESS_HOLD;
 158:Core/Src/MultiButton.c **** 			EVENT_CB(LONG_PRESS_HOLD);
 159:Core/Src/MultiButton.c **** 		}
 160:Core/Src/MultiButton.c **** 		else
 161:Core/Src/MultiButton.c **** 		{ // releasd
 162:Core/Src/MultiButton.c **** 			handle->event = (uint8_t)PRESS_UP;
 163:Core/Src/MultiButton.c **** 			EVENT_CB(PRESS_UP);
 164:Core/Src/MultiButton.c **** 			handle->state = 0; // reset
 165:Core/Src/MultiButton.c **** 		}
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cckzfxvb.s 			page 8


 166:Core/Src/MultiButton.c **** 		break;
 167:Core/Src/MultiButton.c **** 	}
 168:Core/Src/MultiButton.c **** }
 242              		.loc 1 168 1 view .LVU58
 243 0074 10BD     		pop	{r4, pc}
 244              	.LVL15:
 245              	.L32:
  78:Core/Src/MultiButton.c **** 			EVENT_CB(PRESS_DOWN); //#define EVENT_CB(ev)    if(handle->cb[ev])handle->cb[ev]((Button *)handl
 246              		.loc 1 78 4 is_stmt 1 view .LVU59
  78:Core/Src/MultiButton.c **** 			EVENT_CB(PRESS_DOWN); //#define EVENT_CB(ev)    if(handle->cb[ev])handle->cb[ev]((Button *)handl
 247              		.loc 1 78 18 is_stmt 0 view .LVU60
 248 0076 A378     		ldrb	r3, [r4, #2]	@ zero_extendqisi2
 249 0078 6FF30713 		bfc	r3, #4, #4
 250 007c A370     		strb	r3, [r4, #2]
  79:Core/Src/MultiButton.c **** 			handle->ticks = 0;
 251              		.loc 1 79 4 is_stmt 1 view .LVU61
 252 007e A368     		ldr	r3, [r4, #8]
 253 0080 0BB1     		cbz	r3, .L17
  79:Core/Src/MultiButton.c **** 			handle->ticks = 0;
 254              		.loc 1 79 4 discriminator 1 view .LVU62
 255 0082 2046     		mov	r0, r4
 256 0084 9847     		blx	r3
 257              	.LVL16:
 258              	.L17:
  80:Core/Src/MultiButton.c **** 			handle->repeat = 1;
 259              		.loc 1 80 4 view .LVU63
  80:Core/Src/MultiButton.c **** 			handle->repeat = 1;
 260              		.loc 1 80 18 is_stmt 0 view .LVU64
 261 0086 0023     		movs	r3, #0
 262 0088 2380     		strh	r3, [r4]	@ movhi
  81:Core/Src/MultiButton.c **** 			handle->state = 1;
 263              		.loc 1 81 4 is_stmt 1 view .LVU65
  81:Core/Src/MultiButton.c **** 			handle->state = 1;
 264              		.loc 1 81 19 is_stmt 0 view .LVU66
 265 008a A378     		ldrb	r3, [r4, #2]	@ zero_extendqisi2
 266 008c 0122     		movs	r2, #1
 267 008e 62F30303 		bfi	r3, r2, #0, #4
 268 0092 A370     		strb	r3, [r4, #2]
  82:Core/Src/MultiButton.c **** 		}
 269              		.loc 1 82 4 is_stmt 1 view .LVU67
  82:Core/Src/MultiButton.c **** 		}
 270              		.loc 1 82 18 is_stmt 0 view .LVU68
 271 0094 E378     		ldrb	r3, [r4, #3]	@ zero_extendqisi2
 272 0096 62F30203 		bfi	r3, r2, #0, #3
 273 009a E370     		strb	r3, [r4, #3]
 274 009c EAE7     		b	.L5
 275              	.L14:
  91:Core/Src/MultiButton.c **** 		{ // released press up
 276              		.loc 1 91 3 is_stmt 1 view .LVU69
  91:Core/Src/MultiButton.c **** 		{ // released press up
 277              		.loc 1 91 13 is_stmt 0 view .LVU70
 278 009e E378     		ldrb	r3, [r4, #3]	@ zero_extendqisi2
  91:Core/Src/MultiButton.c **** 		{ // released press up
 279              		.loc 1 91 37 view .LVU71
 280 00a0 C3F38012 		ubfx	r2, r3, #6, #1
  91:Core/Src/MultiButton.c **** 		{ // released press up
 281              		.loc 1 91 6 view .LVU72
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cckzfxvb.s 			page 9


 282 00a4 B2EBD31F 		cmp	r2, r3, lsr #7
 283 00a8 10D0     		beq	.L18
  93:Core/Src/MultiButton.c **** 			EVENT_CB(PRESS_UP);
 284              		.loc 1 93 4 is_stmt 1 view .LVU73
  93:Core/Src/MultiButton.c **** 			EVENT_CB(PRESS_UP);
 285              		.loc 1 93 18 is_stmt 0 view .LVU74
 286 00aa A378     		ldrb	r3, [r4, #2]	@ zero_extendqisi2
 287 00ac 0122     		movs	r2, #1
 288 00ae 62F30713 		bfi	r3, r2, #4, #4
 289 00b2 A370     		strb	r3, [r4, #2]
  94:Core/Src/MultiButton.c **** 			handle->ticks = 0;
 290              		.loc 1 94 4 is_stmt 1 view .LVU75
 291 00b4 E368     		ldr	r3, [r4, #12]
 292 00b6 0BB1     		cbz	r3, .L19
  94:Core/Src/MultiButton.c **** 			handle->ticks = 0;
 293              		.loc 1 94 4 discriminator 1 view .LVU76
 294 00b8 2046     		mov	r0, r4
 295 00ba 9847     		blx	r3
 296              	.LVL17:
 297              	.L19:
  95:Core/Src/MultiButton.c **** 			handle->state = 2;
 298              		.loc 1 95 4 view .LVU77
  95:Core/Src/MultiButton.c **** 			handle->state = 2;
 299              		.loc 1 95 18 is_stmt 0 view .LVU78
 300 00bc 0023     		movs	r3, #0
 301 00be 2380     		strh	r3, [r4]	@ movhi
  96:Core/Src/MultiButton.c **** 		}
 302              		.loc 1 96 4 is_stmt 1 view .LVU79
  96:Core/Src/MultiButton.c **** 		}
 303              		.loc 1 96 18 is_stmt 0 view .LVU80
 304 00c0 E378     		ldrb	r3, [r4, #3]	@ zero_extendqisi2
 305 00c2 0222     		movs	r2, #2
 306 00c4 62F30203 		bfi	r3, r2, #0, #3
 307 00c8 E370     		strb	r3, [r4, #3]
 308 00ca D3E7     		b	.L5
 309              	.L18:
  98:Core/Src/MultiButton.c **** 		{
 310              		.loc 1 98 8 is_stmt 1 view .LVU81
  98:Core/Src/MultiButton.c **** 		{
 311              		.loc 1 98 18 is_stmt 0 view .LVU82
 312 00cc 2388     		ldrh	r3, [r4]
  98:Core/Src/MultiButton.c **** 		{
 313              		.loc 1 98 11 view .LVU83
 314 00ce C82B     		cmp	r3, #200
 315 00d0 D0D9     		bls	.L5
 100:Core/Src/MultiButton.c **** 			EVENT_CB(LONG_PRESS_START);
 316              		.loc 1 100 4 is_stmt 1 view .LVU84
 100:Core/Src/MultiButton.c **** 			EVENT_CB(LONG_PRESS_START);
 317              		.loc 1 100 18 is_stmt 0 view .LVU85
 318 00d2 A378     		ldrb	r3, [r4, #2]	@ zero_extendqisi2
 319 00d4 0522     		movs	r2, #5
 320 00d6 62F30713 		bfi	r3, r2, #4, #4
 321 00da A370     		strb	r3, [r4, #2]
 101:Core/Src/MultiButton.c **** 			handle->state = 5;
 322              		.loc 1 101 4 is_stmt 1 view .LVU86
 323 00dc E369     		ldr	r3, [r4, #28]
 324 00de 0BB1     		cbz	r3, .L20
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cckzfxvb.s 			page 10


 101:Core/Src/MultiButton.c **** 			handle->state = 5;
 325              		.loc 1 101 4 discriminator 1 view .LVU87
 326 00e0 2046     		mov	r0, r4
 327 00e2 9847     		blx	r3
 328              	.LVL18:
 329              	.L20:
 102:Core/Src/MultiButton.c **** 		}
 330              		.loc 1 102 4 view .LVU88
 102:Core/Src/MultiButton.c **** 		}
 331              		.loc 1 102 18 is_stmt 0 view .LVU89
 332 00e4 E378     		ldrb	r3, [r4, #3]	@ zero_extendqisi2
 333 00e6 0522     		movs	r2, #5
 334 00e8 62F30203 		bfi	r3, r2, #0, #3
 335 00ec E370     		strb	r3, [r4, #3]
 336 00ee C1E7     		b	.L5
 337              	.L13:
 107:Core/Src/MultiButton.c **** 		{ // press down again
 338              		.loc 1 107 3 is_stmt 1 view .LVU90
 107:Core/Src/MultiButton.c **** 		{ // press down again
 339              		.loc 1 107 13 is_stmt 0 view .LVU91
 340 00f0 E378     		ldrb	r3, [r4, #3]	@ zero_extendqisi2
 107:Core/Src/MultiButton.c **** 		{ // press down again
 341              		.loc 1 107 37 view .LVU92
 342 00f2 C3F38012 		ubfx	r2, r3, #6, #1
 107:Core/Src/MultiButton.c **** 		{ // press down again
 343              		.loc 1 107 6 view .LVU93
 344 00f6 B2EBD31F 		cmp	r2, r3, lsr #7
 345 00fa 0ED0     		beq	.L33
 116:Core/Src/MultiButton.c **** 		{ // released timeout
 346              		.loc 1 116 8 is_stmt 1 view .LVU94
 116:Core/Src/MultiButton.c **** 		{ // released timeout
 347              		.loc 1 116 18 is_stmt 0 view .LVU95
 348 00fc 2388     		ldrh	r3, [r4]
 116:Core/Src/MultiButton.c **** 		{ // released timeout
 349              		.loc 1 116 11 view .LVU96
 350 00fe 3C2B     		cmp	r3, #60
 351 0100 B8D9     		bls	.L5
 118:Core/Src/MultiButton.c **** 			{
 352              		.loc 1 118 4 is_stmt 1 view .LVU97
 118:Core/Src/MultiButton.c **** 			{
 353              		.loc 1 118 23 is_stmt 0 view .LVU98
 354 0102 A378     		ldrb	r3, [r4, #2]	@ zero_extendqisi2
 355 0104 03F00F03 		and	r3, r3, #15
 118:Core/Src/MultiButton.c **** 			{
 356              		.loc 1 118 7 view .LVU99
 357 0108 012B     		cmp	r3, #1
 358 010a 21D0     		beq	.L34
 123:Core/Src/MultiButton.c **** 			{
 359              		.loc 1 123 9 is_stmt 1 view .LVU100
 123:Core/Src/MultiButton.c **** 			{
 360              		.loc 1 123 12 is_stmt 0 view .LVU101
 361 010c 022B     		cmp	r3, #2
 362 010e 2AD0     		beq	.L35
 363              	.L25:
 128:Core/Src/MultiButton.c **** 		}
 364              		.loc 1 128 4 is_stmt 1 view .LVU102
 128:Core/Src/MultiButton.c **** 		}
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cckzfxvb.s 			page 11


 365              		.loc 1 128 18 is_stmt 0 view .LVU103
 366 0110 E378     		ldrb	r3, [r4, #3]	@ zero_extendqisi2
 367 0112 6FF30203 		bfc	r3, #0, #3
 368 0116 E370     		strb	r3, [r4, #3]
 369 0118 ACE7     		b	.L5
 370              	.L33:
 109:Core/Src/MultiButton.c **** 			EVENT_CB(PRESS_DOWN);
 371              		.loc 1 109 4 is_stmt 1 view .LVU104
 109:Core/Src/MultiButton.c **** 			EVENT_CB(PRESS_DOWN);
 372              		.loc 1 109 18 is_stmt 0 view .LVU105
 373 011a A378     		ldrb	r3, [r4, #2]	@ zero_extendqisi2
 374 011c 6FF30713 		bfc	r3, #4, #4
 375 0120 A370     		strb	r3, [r4, #2]
 110:Core/Src/MultiButton.c **** 			handle->repeat++;
 376              		.loc 1 110 4 is_stmt 1 view .LVU106
 377 0122 A368     		ldr	r3, [r4, #8]
 378 0124 0BB1     		cbz	r3, .L22
 110:Core/Src/MultiButton.c **** 			handle->repeat++;
 379              		.loc 1 110 4 discriminator 1 view .LVU107
 380 0126 2046     		mov	r0, r4
 381 0128 9847     		blx	r3
 382              	.LVL19:
 383              	.L22:
 111:Core/Src/MultiButton.c **** 			EVENT_CB(PRESS_REPEAT); // repeat hit
 384              		.loc 1 111 4 view .LVU108
 111:Core/Src/MultiButton.c **** 			EVENT_CB(PRESS_REPEAT); // repeat hit
 385              		.loc 1 111 10 is_stmt 0 view .LVU109
 386 012a A378     		ldrb	r3, [r4, #2]	@ zero_extendqisi2
 387 012c 03F00F02 		and	r2, r3, #15
 111:Core/Src/MultiButton.c **** 			EVENT_CB(PRESS_REPEAT); // repeat hit
 388              		.loc 1 111 18 view .LVU110
 389 0130 0132     		adds	r2, r2, #1
 390 0132 62F30303 		bfi	r3, r2, #0, #4
 391 0136 A370     		strb	r3, [r4, #2]
 112:Core/Src/MultiButton.c **** 			handle->ticks = 0;
 392              		.loc 1 112 4 is_stmt 1 view .LVU111
 393 0138 2369     		ldr	r3, [r4, #16]
 394 013a 0BB1     		cbz	r3, .L23
 112:Core/Src/MultiButton.c **** 			handle->ticks = 0;
 395              		.loc 1 112 4 discriminator 1 view .LVU112
 396 013c 2046     		mov	r0, r4
 397 013e 9847     		blx	r3
 398              	.LVL20:
 399              	.L23:
 113:Core/Src/MultiButton.c **** 			handle->state = 3;
 400              		.loc 1 113 4 view .LVU113
 113:Core/Src/MultiButton.c **** 			handle->state = 3;
 401              		.loc 1 113 18 is_stmt 0 view .LVU114
 402 0140 0023     		movs	r3, #0
 403 0142 2380     		strh	r3, [r4]	@ movhi
 114:Core/Src/MultiButton.c **** 		}
 404              		.loc 1 114 4 is_stmt 1 view .LVU115
 114:Core/Src/MultiButton.c **** 		}
 405              		.loc 1 114 18 is_stmt 0 view .LVU116
 406 0144 E378     		ldrb	r3, [r4, #3]	@ zero_extendqisi2
 407 0146 0322     		movs	r2, #3
 408 0148 62F30203 		bfi	r3, r2, #0, #3
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cckzfxvb.s 			page 12


 409 014c E370     		strb	r3, [r4, #3]
 410 014e 91E7     		b	.L5
 411              	.L34:
 120:Core/Src/MultiButton.c **** 				EVENT_CB(SINGLE_CLICK);
 412              		.loc 1 120 5 is_stmt 1 view .LVU117
 120:Core/Src/MultiButton.c **** 				EVENT_CB(SINGLE_CLICK);
 413              		.loc 1 120 19 is_stmt 0 view .LVU118
 414 0150 A378     		ldrb	r3, [r4, #2]	@ zero_extendqisi2
 415 0152 0322     		movs	r2, #3
 416 0154 62F30713 		bfi	r3, r2, #4, #4
 417 0158 A370     		strb	r3, [r4, #2]
 121:Core/Src/MultiButton.c **** 			}
 418              		.loc 1 121 5 is_stmt 1 view .LVU119
 419 015a 6369     		ldr	r3, [r4, #20]
 420 015c 002B     		cmp	r3, #0
 421 015e D7D0     		beq	.L25
 121:Core/Src/MultiButton.c **** 			}
 422              		.loc 1 121 5 discriminator 1 view .LVU120
 423 0160 2046     		mov	r0, r4
 424 0162 9847     		blx	r3
 425              	.LVL21:
 426 0164 D4E7     		b	.L25
 427              	.L35:
 125:Core/Src/MultiButton.c **** 				EVENT_CB(DOUBLE_CLICK); // repeat hit
 428              		.loc 1 125 5 view .LVU121
 125:Core/Src/MultiButton.c **** 				EVENT_CB(DOUBLE_CLICK); // repeat hit
 429              		.loc 1 125 19 is_stmt 0 view .LVU122
 430 0166 A378     		ldrb	r3, [r4, #2]	@ zero_extendqisi2
 431 0168 0422     		movs	r2, #4
 432 016a 62F30713 		bfi	r3, r2, #4, #4
 433 016e A370     		strb	r3, [r4, #2]
 126:Core/Src/MultiButton.c **** 			}
 434              		.loc 1 126 5 is_stmt 1 view .LVU123
 435 0170 A369     		ldr	r3, [r4, #24]
 436 0172 002B     		cmp	r3, #0
 437 0174 CCD0     		beq	.L25
 126:Core/Src/MultiButton.c **** 			}
 438              		.loc 1 126 5 discriminator 1 view .LVU124
 439 0176 2046     		mov	r0, r4
 440 0178 9847     		blx	r3
 441              	.LVL22:
 442 017a C9E7     		b	.L25
 443              	.L12:
 133:Core/Src/MultiButton.c **** 		{ // released press up
 444              		.loc 1 133 3 view .LVU125
 133:Core/Src/MultiButton.c **** 		{ // released press up
 445              		.loc 1 133 13 is_stmt 0 view .LVU126
 446 017c E378     		ldrb	r3, [r4, #3]	@ zero_extendqisi2
 133:Core/Src/MultiButton.c **** 		{ // released press up
 447              		.loc 1 133 37 view .LVU127
 448 017e C3F38012 		ubfx	r2, r3, #6, #1
 133:Core/Src/MultiButton.c **** 		{ // released press up
 449              		.loc 1 133 6 view .LVU128
 450 0182 B2EBD31F 		cmp	r2, r3, lsr #7
 451 0186 18D0     		beq	.L26
 135:Core/Src/MultiButton.c **** 			EVENT_CB(PRESS_UP);
 452              		.loc 1 135 4 is_stmt 1 view .LVU129
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cckzfxvb.s 			page 13


 135:Core/Src/MultiButton.c **** 			EVENT_CB(PRESS_UP);
 453              		.loc 1 135 18 is_stmt 0 view .LVU130
 454 0188 A378     		ldrb	r3, [r4, #2]	@ zero_extendqisi2
 455 018a 0122     		movs	r2, #1
 456 018c 62F30713 		bfi	r3, r2, #4, #4
 457 0190 A370     		strb	r3, [r4, #2]
 136:Core/Src/MultiButton.c **** 			if (handle->ticks < SHORT_TICKS)
 458              		.loc 1 136 4 is_stmt 1 view .LVU131
 459 0192 E368     		ldr	r3, [r4, #12]
 460 0194 0BB1     		cbz	r3, .L27
 136:Core/Src/MultiButton.c **** 			if (handle->ticks < SHORT_TICKS)
 461              		.loc 1 136 4 discriminator 1 view .LVU132
 462 0196 2046     		mov	r0, r4
 463 0198 9847     		blx	r3
 464              	.LVL23:
 465              	.L27:
 137:Core/Src/MultiButton.c **** 			{
 466              		.loc 1 137 4 view .LVU133
 137:Core/Src/MultiButton.c **** 			{
 467              		.loc 1 137 14 is_stmt 0 view .LVU134
 468 019a 2388     		ldrh	r3, [r4]
 137:Core/Src/MultiButton.c **** 			{
 469              		.loc 1 137 7 view .LVU135
 470 019c 3B2B     		cmp	r3, #59
 471 019e 07D8     		bhi	.L28
 139:Core/Src/MultiButton.c **** 				handle->state = 2; // repeat press
 472              		.loc 1 139 5 is_stmt 1 view .LVU136
 139:Core/Src/MultiButton.c **** 				handle->state = 2; // repeat press
 473              		.loc 1 139 19 is_stmt 0 view .LVU137
 474 01a0 0023     		movs	r3, #0
 475 01a2 2380     		strh	r3, [r4]	@ movhi
 140:Core/Src/MultiButton.c **** 			}
 476              		.loc 1 140 5 is_stmt 1 view .LVU138
 140:Core/Src/MultiButton.c **** 			}
 477              		.loc 1 140 19 is_stmt 0 view .LVU139
 478 01a4 E378     		ldrb	r3, [r4, #3]	@ zero_extendqisi2
 479 01a6 0222     		movs	r2, #2
 480 01a8 62F30203 		bfi	r3, r2, #0, #3
 481 01ac E370     		strb	r3, [r4, #3]
 482 01ae 61E7     		b	.L5
 483              	.L28:
 144:Core/Src/MultiButton.c **** 			}
 484              		.loc 1 144 5 is_stmt 1 view .LVU140
 144:Core/Src/MultiButton.c **** 			}
 485              		.loc 1 144 19 is_stmt 0 view .LVU141
 486 01b0 E378     		ldrb	r3, [r4, #3]	@ zero_extendqisi2
 487 01b2 6FF30203 		bfc	r3, #0, #3
 488 01b6 E370     		strb	r3, [r4, #3]
 489 01b8 5CE7     		b	.L5
 490              	.L26:
 147:Core/Src/MultiButton.c **** 		{ // long press up
 491              		.loc 1 147 8 is_stmt 1 view .LVU142
 147:Core/Src/MultiButton.c **** 		{ // long press up
 492              		.loc 1 147 18 is_stmt 0 view .LVU143
 493 01ba 2388     		ldrh	r3, [r4]
 147:Core/Src/MultiButton.c **** 		{ // long press up
 494              		.loc 1 147 11 view .LVU144
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cckzfxvb.s 			page 14


 495 01bc 3C2B     		cmp	r3, #60
 496 01be 7FF659AF 		bls	.L5
 149:Core/Src/MultiButton.c **** 		}
 497              		.loc 1 149 4 is_stmt 1 view .LVU145
 149:Core/Src/MultiButton.c **** 		}
 498              		.loc 1 149 18 is_stmt 0 view .LVU146
 499 01c2 E378     		ldrb	r3, [r4, #3]	@ zero_extendqisi2
 500 01c4 6FF30203 		bfc	r3, #0, #3
 501 01c8 E370     		strb	r3, [r4, #3]
 502 01ca 53E7     		b	.L5
 503              	.L10:
 154:Core/Src/MultiButton.c **** 		{
 504              		.loc 1 154 3 is_stmt 1 view .LVU147
 154:Core/Src/MultiButton.c **** 		{
 505              		.loc 1 154 13 is_stmt 0 view .LVU148
 506 01cc E378     		ldrb	r3, [r4, #3]	@ zero_extendqisi2
 154:Core/Src/MultiButton.c **** 		{
 507              		.loc 1 154 37 view .LVU149
 508 01ce C3F38012 		ubfx	r2, r3, #6, #1
 154:Core/Src/MultiButton.c **** 		{
 509              		.loc 1 154 6 view .LVU150
 510 01d2 B2EBD31F 		cmp	r2, r3, lsr #7
 511 01d6 0DD0     		beq	.L36
 162:Core/Src/MultiButton.c **** 			EVENT_CB(PRESS_UP);
 512              		.loc 1 162 4 is_stmt 1 view .LVU151
 162:Core/Src/MultiButton.c **** 			EVENT_CB(PRESS_UP);
 513              		.loc 1 162 18 is_stmt 0 view .LVU152
 514 01d8 A378     		ldrb	r3, [r4, #2]	@ zero_extendqisi2
 515 01da 0122     		movs	r2, #1
 516 01dc 62F30713 		bfi	r3, r2, #4, #4
 517 01e0 A370     		strb	r3, [r4, #2]
 163:Core/Src/MultiButton.c **** 			handle->state = 0; // reset
 518              		.loc 1 163 4 is_stmt 1 view .LVU153
 519 01e2 E368     		ldr	r3, [r4, #12]
 520 01e4 0BB1     		cbz	r3, .L30
 163:Core/Src/MultiButton.c **** 			handle->state = 0; // reset
 521              		.loc 1 163 4 discriminator 1 view .LVU154
 522 01e6 2046     		mov	r0, r4
 523 01e8 9847     		blx	r3
 524              	.LVL24:
 525              	.L30:
 164:Core/Src/MultiButton.c **** 		}
 526              		.loc 1 164 4 view .LVU155
 164:Core/Src/MultiButton.c **** 		}
 527              		.loc 1 164 18 is_stmt 0 view .LVU156
 528 01ea E378     		ldrb	r3, [r4, #3]	@ zero_extendqisi2
 529 01ec 6FF30203 		bfc	r3, #0, #3
 530 01f0 E370     		strb	r3, [r4, #3]
 531              		.loc 1 168 1 view .LVU157
 532 01f2 3FE7     		b	.L5
 533              	.L36:
 157:Core/Src/MultiButton.c **** 			EVENT_CB(LONG_PRESS_HOLD);
 534              		.loc 1 157 4 is_stmt 1 view .LVU158
 157:Core/Src/MultiButton.c **** 			EVENT_CB(LONG_PRESS_HOLD);
 535              		.loc 1 157 18 is_stmt 0 view .LVU159
 536 01f4 A378     		ldrb	r3, [r4, #2]	@ zero_extendqisi2
 537 01f6 0622     		movs	r2, #6
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cckzfxvb.s 			page 15


 538 01f8 62F30713 		bfi	r3, r2, #4, #4
 539 01fc A370     		strb	r3, [r4, #2]
 158:Core/Src/MultiButton.c **** 		}
 540              		.loc 1 158 4 is_stmt 1 view .LVU160
 541 01fe 236A     		ldr	r3, [r4, #32]
 542 0200 002B     		cmp	r3, #0
 543 0202 3FF437AF 		beq	.L5
 158:Core/Src/MultiButton.c **** 		}
 544              		.loc 1 158 4 discriminator 1 view .LVU161
 545 0206 2046     		mov	r0, r4
 546 0208 9847     		blx	r3
 547              	.LVL25:
 548 020a 33E7     		b	.L5
 549              		.cfi_endproc
 550              	.LFE6:
 552              		.section	.text.button_start,"ax",%progbits
 553              		.align	1
 554              		.global	button_start
 555              		.syntax unified
 556              		.thumb
 557              		.thumb_func
 558              		.fpu softvfp
 560              	button_start:
 561              	.LVL26:
 562              	.LFB7:
 169:Core/Src/MultiButton.c **** /**
 170:Core/Src/MultiButton.c ****  * @brief  Start the button work, add the handle into work list.
 171:Core/Src/MultiButton.c ****  * @param  handle: target handle strcut.
 172:Core/Src/MultiButton.c ****  * @retval 0: succeed. -1: already exist.
 173:Core/Src/MultiButton.c ****  */
 174:Core/Src/MultiButton.c **** int button_start(struct Button *handle)
 175:Core/Src/MultiButton.c **** {
 563              		.loc 1 175 1 view -0
 564              		.cfi_startproc
 565              		@ args = 0, pretend = 0, frame = 0
 566              		@ frame_needed = 0, uses_anonymous_args = 0
 567              		@ link register save eliminated.
 176:Core/Src/MultiButton.c **** 	struct Button *target = head_handle; //ç”³è¯·ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘å¤´ç»“ç‚¹
 568              		.loc 1 176 2 view .LVU163
 569              		.loc 1 176 17 is_stmt 0 view .LVU164
 570 0000 074B     		ldr	r3, .L43
 571 0002 1A68     		ldr	r2, [r3]
 572              	.LVL27:
 177:Core/Src/MultiButton.c **** 	while (target)						 // targetæ˜¯ä¸€ä¸ªä¸´æ—¶çš„é“¾è¡¨ä¸­ç»“ç‚¹çš„å®¹å™¨ã€‚
 573              		.loc 1 177 2 is_stmt 1 view .LVU165
 176:Core/Src/MultiButton.c **** 	struct Button *target = head_handle; //ç”³è¯·ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘å¤´ç»“ç‚¹
 574              		.loc 1 176 17 is_stmt 0 view .LVU166
 575 0004 1346     		mov	r3, r2
 576              	.LVL28:
 577              	.L38:
 578              		.loc 1 177 8 is_stmt 1 view .LVU167
 579 0006 33B1     		cbz	r3, .L41
 178:Core/Src/MultiButton.c **** 	{
 179:Core/Src/MultiButton.c **** 		if (target == handle)  //æ£€æŸ¥ä¼ å…¥ç»“ç‚¹åœ°å€ä¸Žé“¾è¡¨ä¸­çš„ç»“ç‚¹åœ°å€æœ‰æ²¡æœ‰é‡å¤çš„
 580              		.loc 1 179 3 view .LVU168
 581              		.loc 1 179 6 is_stmt 0 view .LVU169
 582 0008 8342     		cmp	r3, r0
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cckzfxvb.s 			page 16


 583 000a 01D0     		beq	.L42
 180:Core/Src/MultiButton.c **** 			return -1;		   //å¦‚æžœæœ‰é‡ç½®çš„ç»“ç‚¹åœ°å€å°±ä»£è¡¨è¿™ä¸ªç»“ç‚¹å·²ç»å­˜åœ¨äºŽé“¾è¡¨ä¸­ï¼Œç
 181:Core/Src/MultiButton.c **** 		target = target->next; //é“¾è¡¨å‘åŽéåŽ†ï¼Œä¸Žä¼ å…¥ç»“ç‚¹è¿›è¡Œæ¯”å¯¹
 584              		.loc 1 181 3 is_stmt 1 view .LVU170
 585              		.loc 1 181 10 is_stmt 0 view .LVU171
 586 000c 5B6A     		ldr	r3, [r3, #36]
 587              	.LVL29:
 588              		.loc 1 181 10 view .LVU172
 589 000e FAE7     		b	.L38
 590              	.L42:
 180:Core/Src/MultiButton.c **** 			return -1;		   //å¦‚æžœæœ‰é‡ç½®çš„ç»“ç‚¹åœ°å€å°±ä»£è¡¨è¿™ä¸ªç»“ç‚¹å·²ç»å­˜åœ¨äºŽé“¾è¡¨ä¸­ï¼Œç
 591              		.loc 1 180 4 is_stmt 1 view .LVU173
 180:Core/Src/MultiButton.c **** 			return -1;		   //å¦‚æžœæœ‰é‡ç½®çš„ç»“ç‚¹åœ°å€å°±ä»£è¡¨è¿™ä¸ªç»“ç‚¹å·²ç»å­˜åœ¨äºŽé“¾è¡¨ä¸­ï¼Œç
 592              		.loc 1 180 11 is_stmt 0 view .LVU174
 593 0010 4FF0FF30 		mov	r0, #-1
 594              	.LVL30:
 180:Core/Src/MultiButton.c **** 			return -1;		   //å¦‚æžœæœ‰é‡ç½®çš„ç»“ç‚¹åœ°å€å°±ä»£è¡¨è¿™ä¸ªç»“ç‚¹å·²ç»å­˜åœ¨äºŽé“¾è¡¨ä¸­ï¼Œç
 595              		.loc 1 180 11 view .LVU175
 596 0014 7047     		bx	lr
 597              	.LVL31:
 598              	.L41:
 182:Core/Src/MultiButton.c **** 	}
 183:Core/Src/MultiButton.c **** 
 184:Core/Src/MultiButton.c **** 	handle->next = head_handle; //ä¼ å…¥çš„ç»“ç‚¹çš„å°¾æŒ‡é’ˆï¼ŒæŒ‡å‘å¤´ç»“ç‚¹ã€‚
 599              		.loc 1 184 2 is_stmt 1 view .LVU176
 600              		.loc 1 184 15 is_stmt 0 view .LVU177
 601 0016 4262     		str	r2, [r0, #36]
 185:Core/Src/MultiButton.c **** 	head_handle = handle;		//å¤´ç»“ç‚¹å˜ä¸ºå½“å‰ä¼ å…¥çš„ç»“ç‚¹ã€‚
 602              		.loc 1 185 2 is_stmt 1 view .LVU178
 603              		.loc 1 185 14 is_stmt 0 view .LVU179
 604 0018 014B     		ldr	r3, .L43
 605              	.LVL32:
 606              		.loc 1 185 14 view .LVU180
 607 001a 1860     		str	r0, [r3]
 608              	.LVL33:
 186:Core/Src/MultiButton.c **** }
 609              		.loc 1 186 1 view .LVU181
 610 001c 7047     		bx	lr
 611              	.L44:
 612 001e 00BF     		.align	2
 613              	.L43:
 614 0020 00000000 		.word	.LANCHOR0
 615              		.cfi_endproc
 616              	.LFE7:
 618              		.section	.text.button_stop,"ax",%progbits
 619              		.align	1
 620              		.global	button_stop
 621              		.syntax unified
 622              		.thumb
 623              		.thumb_func
 624              		.fpu softvfp
 626              	button_stop:
 627              	.LVL34:
 628              	.LFB8:
 187:Core/Src/MultiButton.c **** 
 188:Core/Src/MultiButton.c **** /**
 189:Core/Src/MultiButton.c ****  * @brief  Stop the button work, remove the handle off work list.
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cckzfxvb.s 			page 17


 190:Core/Src/MultiButton.c ****  * @param  handle: target handle strcut.
 191:Core/Src/MultiButton.c ****  * @retval None
 192:Core/Src/MultiButton.c ****  */
 193:Core/Src/MultiButton.c **** void button_stop(struct Button *handle)
 194:Core/Src/MultiButton.c **** {
 629              		.loc 1 194 1 is_stmt 1 view -0
 630              		.cfi_startproc
 631              		@ args = 0, pretend = 0, frame = 0
 632              		@ frame_needed = 0, uses_anonymous_args = 0
 633              		@ link register save eliminated.
 195:Core/Src/MultiButton.c **** 	struct Button **curr;
 634              		.loc 1 195 2 view .LVU183
 196:Core/Src/MultiButton.c **** 	for (curr = &head_handle; *curr;)
 635              		.loc 1 196 2 view .LVU184
 636              		.loc 1 196 12 is_stmt 0 view .LVU185
 637 0000 054A     		ldr	r2, .L52
 638              	.LVL35:
 639              	.L46:
 640              		.loc 1 196 28 is_stmt 1 discriminator 1 view .LVU186
 641 0002 1368     		ldr	r3, [r2]
 642              		.loc 1 196 2 is_stmt 0 discriminator 1 view .LVU187
 643 0004 3BB1     		cbz	r3, .L50
 644              	.LBB2:
 197:Core/Src/MultiButton.c **** 	{
 198:Core/Src/MultiButton.c **** 		struct Button *entry = *curr;
 645              		.loc 1 198 3 is_stmt 1 view .LVU188
 646              	.LVL36:
 199:Core/Src/MultiButton.c **** 		if (entry == handle)
 647              		.loc 1 199 3 view .LVU189
 648              		.loc 1 199 6 is_stmt 0 view .LVU190
 649 0006 8342     		cmp	r3, r0
 650 0008 02D0     		beq	.L51
 200:Core/Src/MultiButton.c **** 		{
 201:Core/Src/MultiButton.c **** 			*curr = entry->next;
 202:Core/Src/MultiButton.c **** 			//			free(entry);
 203:Core/Src/MultiButton.c **** 			return; // glacier add 2021-8-18
 204:Core/Src/MultiButton.c **** 		}
 205:Core/Src/MultiButton.c **** 		else
 206:Core/Src/MultiButton.c **** 			curr = &entry->next;
 651              		.loc 1 206 4 is_stmt 1 view .LVU191
 652              		.loc 1 206 9 is_stmt 0 view .LVU192
 653 000a 03F12402 		add	r2, r3, #36
 654              	.LVL37:
 655              		.loc 1 206 9 view .LVU193
 656 000e F8E7     		b	.L46
 657              	.L51:
 201:Core/Src/MultiButton.c **** 			//			free(entry);
 658              		.loc 1 201 4 is_stmt 1 view .LVU194
 201:Core/Src/MultiButton.c **** 			//			free(entry);
 659              		.loc 1 201 17 is_stmt 0 view .LVU195
 660 0010 5B6A     		ldr	r3, [r3, #36]
 661              	.LVL38:
 201:Core/Src/MultiButton.c **** 			//			free(entry);
 662              		.loc 1 201 10 view .LVU196
 663 0012 1360     		str	r3, [r2]
 664              	.LVL39:
 203:Core/Src/MultiButton.c **** 		}
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cckzfxvb.s 			page 18


 665              		.loc 1 203 4 is_stmt 1 view .LVU197
 666 0014 7047     		bx	lr
 667              	.L50:
 203:Core/Src/MultiButton.c **** 		}
 668              		.loc 1 203 4 is_stmt 0 view .LVU198
 669              	.LBE2:
 207:Core/Src/MultiButton.c **** 	}
 208:Core/Src/MultiButton.c **** }
 670              		.loc 1 208 1 view .LVU199
 671 0016 7047     		bx	lr
 672              	.L53:
 673              		.align	2
 674              	.L52:
 675 0018 00000000 		.word	.LANCHOR0
 676              		.cfi_endproc
 677              	.LFE8:
 679              		.section	.text.button_ticks,"ax",%progbits
 680              		.align	1
 681              		.global	button_ticks
 682              		.syntax unified
 683              		.thumb
 684              		.thumb_func
 685              		.fpu softvfp
 687              	button_ticks:
 688              	.LFB9:
 209:Core/Src/MultiButton.c **** 
 210:Core/Src/MultiButton.c **** /**
 211:Core/Src/MultiButton.c ****  * @brief  background ticks, timer repeat invoking interval 5ms.
 212:Core/Src/MultiButton.c ****  * @param  None.
 213:Core/Src/MultiButton.c ****  * @retval None.
 214:Core/Src/MultiButton.c ****  */
 215:Core/Src/MultiButton.c **** void button_ticks()
 216:Core/Src/MultiButton.c **** {
 689              		.loc 1 216 1 is_stmt 1 view -0
 690              		.cfi_startproc
 691              		@ args = 0, pretend = 0, frame = 0
 692              		@ frame_needed = 0, uses_anonymous_args = 0
 693 0000 10B5     		push	{r4, lr}
 694              	.LCFI2:
 695              		.cfi_def_cfa_offset 8
 696              		.cfi_offset 4, -8
 697              		.cfi_offset 14, -4
 217:Core/Src/MultiButton.c **** 	struct Button *target;
 698              		.loc 1 217 2 view .LVU201
 218:Core/Src/MultiButton.c **** 	for (target = head_handle; target; target = target->next)
 699              		.loc 1 218 2 view .LVU202
 700              		.loc 1 218 14 is_stmt 0 view .LVU203
 701 0002 044B     		ldr	r3, .L59
 702 0004 1C68     		ldr	r4, [r3]
 703              	.LVL40:
 704              	.L55:
 705              		.loc 1 218 29 is_stmt 1 discriminator 1 view .LVU204
 706              		.loc 1 218 2 is_stmt 0 discriminator 1 view .LVU205
 707 0006 24B1     		cbz	r4, .L58
 219:Core/Src/MultiButton.c **** 	{
 220:Core/Src/MultiButton.c **** 		button_handler(target);
 708              		.loc 1 220 3 is_stmt 1 discriminator 3 view .LVU206
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cckzfxvb.s 			page 19


 709 0008 2046     		mov	r0, r4
 710 000a FFF7FEFF 		bl	button_handler
 711              	.LVL41:
 218:Core/Src/MultiButton.c **** 	for (target = head_handle; target; target = target->next)
 712              		.loc 1 218 37 discriminator 3 view .LVU207
 218:Core/Src/MultiButton.c **** 	for (target = head_handle; target; target = target->next)
 713              		.loc 1 218 44 is_stmt 0 discriminator 3 view .LVU208
 714 000e 646A     		ldr	r4, [r4, #36]
 715              	.LVL42:
 218:Core/Src/MultiButton.c **** 	for (target = head_handle; target; target = target->next)
 716              		.loc 1 218 44 discriminator 3 view .LVU209
 717 0010 F9E7     		b	.L55
 718              	.L58:
 221:Core/Src/MultiButton.c **** 	}
 222:Core/Src/MultiButton.c **** }...
 719              		.loc 1 222 1 view .LVU210
 720 0012 10BD     		pop	{r4, pc}
 721              	.LVL43:
 722              	.L60:
 723              		.loc 1 222 1 view .LVU211
 724              		.align	2
 725              	.L59:
 726 0014 00000000 		.word	.LANCHOR0
 727              		.cfi_endproc
 728              	.LFE9:
 730              		.section	.bss.head_handle,"aw",%nobits
 731              		.align	2
 732              		.set	.LANCHOR0,. + 0
 735              	head_handle:
 736 0000 00000000 		.space	4
 737              		.text
 738              	.Letext0:
 739              		.file 2 "c:\\program files (x86)\\gnu tools arm embedded\\9 2019-q4-major\\arm-none-eabi\\include\
 740              		.file 3 "c:\\program files (x86)\\gnu tools arm embedded\\9 2019-q4-major\\arm-none-eabi\\include\
 741              		.file 4 "c:\\program files (x86)\\gnu tools arm embedded\\9 2019-q4-major\\arm-none-eabi\\include\
 742              		.file 5 "c:\\program files (x86)\\gnu tools arm embedded\\9 2019-q4-major\\arm-none-eabi\\include\
 743              		.file 6 "c:\\program files (x86)\\gnu tools arm embedded\\9 2019-q4-major\\lib\\gcc\\arm-none-eabi
 744              		.file 7 "c:\\program files (x86)\\gnu tools arm embedded\\9 2019-q4-major\\arm-none-eabi\\include\
 745              		.file 8 "Core/Inc/MultiButton.h"
 746              		.file 9 "<built-in>"
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cckzfxvb.s 			page 20


DEFINED SYMBOLS
                            *ABS*:00000000 MultiButton.c
C:\Users\ADMINI~1\AppData\Local\Temp\cckzfxvb.s:16     .text.button_init:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cckzfxvb.s:24     .text.button_init:00000000 button_init
C:\Users\ADMINI~1\AppData\Local\Temp\cckzfxvb.s:81     .text.button_attach:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cckzfxvb.s:88     .text.button_attach:00000000 button_attach
C:\Users\ADMINI~1\AppData\Local\Temp\cckzfxvb.s:108    .text.get_button_event:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cckzfxvb.s:115    .text.get_button_event:00000000 get_button_event
C:\Users\ADMINI~1\AppData\Local\Temp\cckzfxvb.s:134    .text.button_handler:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cckzfxvb.s:141    .text.button_handler:00000000 button_handler
C:\Users\ADMINI~1\AppData\Local\Temp\cckzfxvb.s:219    .text.button_handler:00000058 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cckzfxvb.s:225    .text.button_handler:0000005e $t
C:\Users\ADMINI~1\AppData\Local\Temp\cckzfxvb.s:553    .text.button_start:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cckzfxvb.s:560    .text.button_start:00000000 button_start
C:\Users\ADMINI~1\AppData\Local\Temp\cckzfxvb.s:614    .text.button_start:00000020 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cckzfxvb.s:619    .text.button_stop:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cckzfxvb.s:626    .text.button_stop:00000000 button_stop
C:\Users\ADMINI~1\AppData\Local\Temp\cckzfxvb.s:675    .text.button_stop:00000018 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cckzfxvb.s:680    .text.button_ticks:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cckzfxvb.s:687    .text.button_ticks:00000000 button_ticks
C:\Users\ADMINI~1\AppData\Local\Temp\cckzfxvb.s:726    .text.button_ticks:00000014 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cckzfxvb.s:731    .bss.head_handle:00000000 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cckzfxvb.s:735    .bss.head_handle:00000000 head_handle

UNDEFINED SYMBOLS
memset
